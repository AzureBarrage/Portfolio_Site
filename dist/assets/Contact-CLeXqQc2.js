import{r,j as e,c as P,e as E,f as T,g as f,B as _,s as m,h as O,t as d}from"./index-BQ03mR58.js";import{S as F,C as j}from"./Section-CrVqbLDd.js";const z={success:e.jsx(f,{"aria-hidden":"true",className:"text-emerald-500",size:18}),error:e.jsx(T,{"aria-hidden":"true",className:"text-rose-500",size:18}),info:e.jsx(E,{"aria-hidden":"true",className:"text-sky-500",size:18})},M=({title:t,message:s,type:a="info",isOpen:l,onClose:n})=>(r.useEffect(()=>{if(!l)return;const x=window.setTimeout(()=>{n()},3800);return()=>window.clearTimeout(x)},[l,n]),l?e.jsx("div",{className:"fixed bottom-4 right-4 z-[70] w-[calc(100%-2rem)] max-w-sm",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"surface flex items-start gap-3 p-4",children:[z[a],e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:t}),s?e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:s}):null]}),e.jsx("button",{type:"button",onClick:n,className:P("rounded-md px-2 py-1 text-xs font-medium text-slate-500 transition hover:bg-slate-200 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200"),"aria-label":"Close notification",children:"Close"})]})}):null),k={name:"",email:"",message:"",company:""},B=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,I=t=>{const s={};t.name.trim()||(s.name="Please enter your name."),t.email.trim()?B.test(t.email.trim())||(s.email="Please enter a valid email address."):s.email="Please enter your email address.";const a=t.message.trim().length;return a?a<20?s.message="Please include at least 20 characters so I can better understand your request.":a>1200&&(s.message="Message is too long. Please keep it under 1200 characters."):s.message="Please add a message.",s},V=()=>{const[t,s]=r.useState(k),[a,l]=r.useState({}),[n,x]=r.useState(!1),[v]=r.useState(()=>Date.now()),[w,i]=r.useState(null),[u,o]=r.useState({isOpen:!1,type:"info",title:""}),N=r.useMemo(()=>t.message.trim().length,[t.message]),h=c=>{const{name:g,value:p}=c.target;s(b=>({...b,[g]:p}))},C=async()=>{await navigator.clipboard.writeText(m.person.email),o({isOpen:!0,type:"success",title:"Email copied",message:`${m.person.email} is now in your clipboard.`}),d("contact_copy_email")},S=async c=>{c.preventDefault();const g=I(t);if(l(g),Object.keys(g).length>0){i("Please resolve the highlighted fields before submitting.");return}const p=Date.now()-v;if(t.company.trim().length>0||p<1500){i("Submission blocked. Please try again in a moment."),o({isOpen:!0,type:"error",title:"Submission not accepted",message:"The form detected suspicious behavior and blocked this request."});return}x(!0),i("Sending your message…");try{const b=new URLSearchParams({"form-name":"contact",name:t.name,email:t.email,message:t.message}),y=await fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.toString()});if(!y.ok)throw new Error(`Unexpected response: ${y.status}`);s(k),l({}),i("Thanks for your message. I will get back to you soon."),o({isOpen:!0,type:"success",title:"Message sent",message:"Thanks for reaching out — I will reply as soon as possible."}),d("contact_submit_success")}catch{i("Message failed to send. Please email me directly."),o({isOpen:!0,type:"error",title:"Submission failed",message:"Please try again or reach out via email."}),d("contact_submit_error")}finally{x(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(F,{id:"contact",label:"Contact",title:"Let’s build something meaningful",subtitle:"Send a message, copy my email instantly, or book a quick intro chat.",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]",children:[e.jsx(j,{children:e.jsxs("form",{method:"POST",name:"contact",onSubmit:S,noValidate:!0,children:[e.jsx("input",{type:"hidden",name:"form-name",value:"contact"}),e.jsx("input",{type:"text",name:"company",value:t.company,onChange:h,className:"hidden",autoComplete:"off",tabIndex:-1,"aria-hidden":"true"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{htmlFor:"contact-name",className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Name"}),e.jsx("input",{id:"contact-name",className:"w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",type:"text",name:"name",value:t.name,onChange:h,"aria-invalid":!!a.name,"aria-describedby":a.name?"contact-name-error":void 0}),a.name?e.jsx("p",{id:"contact-name-error",className:"mt-1 text-xs text-rose-500",children:a.name}):null]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{htmlFor:"contact-email",className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Email"}),e.jsx("input",{id:"contact-email",className:"w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",type:"email",name:"email",value:t.email,onChange:h,"aria-invalid":!!a.email,"aria-describedby":a.email?"contact-email-error":void 0}),a.email?e.jsx("p",{id:"contact-email-error",className:"mt-1 text-xs text-rose-500",children:a.email}):null]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"contact-message",className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Message"}),e.jsx("textarea",{id:"contact-message",className:"w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",name:"message",rows:7,value:t.message,onChange:h,"aria-invalid":!!a.message,"aria-describedby":a.message?"contact-message-error":"contact-message-help"}),e.jsxs("p",{id:"contact-message-help",className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:[N,"/1200 characters"]}),a.message?e.jsx("p",{id:"contact-message-error",className:"mt-1 text-xs text-rose-500",children:a.message}):null]}),e.jsxs("div",{className:"mt-5 flex flex-wrap items-center gap-3",children:[e.jsx(_,{type:"submit",disabled:n,className:"disabled:cursor-not-allowed disabled:opacity-70",children:n?"Sending…":m.cta.secondary}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300","aria-live":"polite",children:w})]})]})}),e.jsxs(j,{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Alternative contact options"}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-700 dark:text-slate-300",children:"Prefer direct outreach? Use one of these quick actions."}),e.jsxs("div",{className:"mt-5 space-y-3",children:[e.jsxs("button",{type:"button",onClick:C,className:"flex w-full items-center justify-between rounded-lg border border-slate-300 px-4 py-3 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-200 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800",children:[e.jsx("span",{children:m.person.email}),e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs",children:[e.jsx(O,{size:12,"aria-hidden":"true"})," Copy"]})]}),e.jsxs("a",{href:m.cta.scheduleUrl,target:"_blank",rel:"noreferrer",className:"flex w-full items-center justify-between rounded-lg border border-slate-300 px-4 py-3 text-sm font-medium text-slate-700 transition hover:bg-slate-200 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800",onClick:()=>d("contact_schedule_click"),children:[e.jsx("span",{children:"Schedule a chat"}),e.jsx(f,{size:14,"aria-hidden":"true"})]}),e.jsxs("a",{href:"mailto:julian.macleod96@gmail.com",className:"flex w-full items-center justify-between rounded-lg border border-slate-300 px-4 py-3 text-sm font-medium text-slate-700 transition hover:bg-slate-200 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800",onClick:()=>d("contact_mailto_click"),children:[e.jsx("span",{children:"Open email client"}),e.jsx(f,{size:14,"aria-hidden":"true"})]})]})]})]})}),e.jsx(M,{isOpen:u.isOpen,type:u.type,title:u.title,message:u.message,onClose:()=>o(c=>({...c,isOpen:!1}))})]})};export{V as default};
